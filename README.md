# Репозиторий проекта по дисциплине "Техническое зрение"

# ВКЛАД УЧАСТНИКОВ КОМАНДЫ
| ФИО  | Вклад | Оценка |
|-------|-----|-----|
| Киколиашивли Даниэль | Разработка и объяснение классов Blicks, Colors, EffectBake, GeometricDistortions  |4|
| Вылцан Евгений   | Разработка и объяснение классов AliasingMuar, ChromeAbberation, InfraRed, Sharpness |4|
| Айтиев дмитрий   | Разработка и объяснение классов LightPower, Noise, RollingShutter, Vinet |4|

## КАЖДЫЙ УЧАСТНИК ВСТАВИЛ РЕАЛИЗАЦИЮ МЕТОДОВ СВОИХ КЛАССОВ В КЛАСС main САМОСТОЯТЕЛЬНО

Варианты оценки камер:
https://arxiv.org/pdf/2005.10547 - Perceptual Quality Assessment of Omnidirectional
Images as Moving Camera Videos

https://arxiv.org/pdf/2003.01299 - A MULTIPLE ATTRIBUTES IMAGE QUALITY DATABASE FOR
SMARTPHONE CAMERA PHOTO QUALITY ASSESSMENT

https://arxiv.org/pdf/1912.07192 - Subjective Quality Assessment of Ground-based Camera Images

https://arxiv.org/pdf/1907.12646 - Camera Exposure Control for Robust Robot Vision
with Noise-Aware Image Quality Assessment

https://arxiv.org/pdf/1903.09169 - Quantitative Depth Quality Assessment of RGBD Cameras At Close
Range Using 3D Printed Fixtures "-"

https://arxiv.org/pdf/1711.10700 - BLADE: Filter Learning for General Purpose
Computational Photography "-?"

https://arxiv.org/pdf/1901.09482 - Bridging the Gap Between Computational
Photography and Visual Recognition "Как субъективные оценки влияют"

https://arxiv.org/pdf/2306.06089 - Computational Flash Photography through Intrinsics https://yaksoy.github.io/intrinsicFlash/

https://arxiv.org/pdf/2308.01379 - Computational Long Exposure Mobile Photography

https://arxiv.org/pdf/2309.06724 - Deep Nonparametric Convexified Filtering for Computational Photography,
Image Synthesis and Adversarial Defense

https://arxiv.org/pdf/2204.04987 - A Dual Sensor Computational Camera for
High Quality Dark Videography "как получали метрики"

Общие требования к входным изображениям

1.1 Формат и глубина цвета
Поддерживаемые форматы: JPEG, PNG, TIFF, BMP.
Рекомендуется использовать несжатый или слабо сжатый формат (PNG, TIFF) для минимизации артефактов сжатия.
Минимальная глубина цвета: 8 бит на канал. При наличии 12–16-битных снимков качество оценки повышается.

1.2 Цветовое пространство
Входные файлы читаются через OpenCV (cv2.imread), то есть в цветовом порядке BGR.
Для цветовых алгоритмов (InfraRed, Colors) каналы B, G, R интерпретируются в диапазоне [0…255] или по бит-глубине.

1.3 Разрешение и соотношение сторон
Разрешение должно быть достаточно высоким, чтобы алгоритмы детекции углов, линий и текстур работали надёжно (>800×600 px).
Соотношение сторон произвольное, но при разбиении на сетку (LightPower) рекомендуется кратность числу ячеек.

1.4 Освещение и сцена
Однородная подсветка (для LightPower) — ровный сцепленный фон или градиент не более 10 % от средней яркости.
Для калибровки GeometricDistortions: шахматная доска должна быть хорошо освещена, без бликов и сильных теней.

Для Тестирования оценки метрик необходимо: переместить нужную картинку в папку Images_for_run и в коде в переменной image_path заменить последнюю часть на имя нужного изображения, пример: вместо "Images_for_run/test1.png" сделать "Images_for_run/имя.расширение".

Все метрики будут как показаны в самом приложении, так и выведены в консоль. Кроме оценки бликов, она будет выведена как файл glare_mask.jpg, который создастся в папке проекта.

Далее идёт описание классов и какие метрики они предсталвяют

#### AliasingMuar  
Алгоритм AliasingMuar предназначен для оценки наличия и интенсивности эффекта алиасинга и муара на изображениях, содержащих периодические или высокочастотные текстуры. На вход подаётся одиночное изображение или серия кадров с разрешением, достаточным для обнаружения деталей выше порога Найквиста (обычно не менее 800×600 px). Перед обработкой изображение преобразуется в градации серого, после чего вычисляется двумерное быстрореализуемое преобразование Фурье для выявления энергетического спектра высоких частот. В рамках теории дискретного преобразования сигналов производится анализ амплитудных пиков за пределами полосы пропускания оптики – их относительная мощность и распределение по пространственным частотам служат скалярным «алиасинг-скором». Оптимальные параметры включают выбор окна Ханна или Хэмминга для снижения утечек спектра и порог чувствительности к пиковым значениям.

#### Blicks  
В модуле Blicks реализована детекция бликов и засветов на основе анализа цветового пространства HSV. Алгоритм требует на вход цветное изображение в формате BGR, на котором присутствуют отражающие поверхности, допускающие появление спекулярных пятен. Для каждого пикселя рассчитываются компоненты яркости (Value) и насыщенности (Saturation). Высокие значения яркости при низкой насыщенности считаются признаками блика. В теории отражений используется принцип, что в зоне зеркального отражения спектр приближается к спектру источника света, а не к спектру поверхности, что проявляется в уменьшении цветовой информационности. В выходном результате получается карта засветов и процентное отношение «бликовых» пикселей к общей площади.

#### ChromeAbberation  
Модуль ChromeAbberation анализирует хроматическую аберрацию, возникающую из-за дисперсии в объективе. На вход подаётся цветное изображение, содержащие чёткие контрастные границы (края зданий, текстовые контуры), и задаются параметры порога детекции краёв и радиус поиска цветовых смещений. В основе лежит методика измерения разности координат пиковой интенсивности красного и синего каналов вдоль нормали к границе, найденной в градациях серого с помощью оператора Кэнни или Собеля. Расхождение в пикселях усредняется по всем значимым граням, что позволяет получить скалярную метрику CA­­­-искажения в единицах пиксельного смещения.

#### Colors  
Алгоритм Colors служит для оценки и коррекции баланса белого. Для корректной работы желательно наличие в кадре эталона нейтрального серого или равномерно освещённой белой поверхности. Считанные через OpenCV BGR-каналы нормализуются в диапазон [0…1], после чего вычисляются средние значения каналов R, G и B. На основе принципа нейтральности строятся коэффициенты усиления каждого канала, необходимые для выравнивания их среднего уровня. В теории белый объект отражает все длины волн одинаково, поэтому отклонения от равенства средних каналов свидетельствуют о цветовом сдвиге, который затем компенсируется полученными коэффициентами.

#### EffectBake  
EffectBake измеряет степень размытия (блюра) и эффект боке на основе анализа градиентов и детекции круговых пятен. Для оценки blur-метрики изображение сначала фильтруется операторами Собеля или Лапласа, после чего вычисляется среднеквадратическое значение градиента по всему кадру. Для количественной характеристики боке выполняется поиск окружностей методом Хафа в границах с заданным диапазоном радиусов и порогом отклика. Высокая плотность круговых пятен в сочетании с низкой яркостной контрастностью по краям указывает на сильный боке-эффект. Выходными данными являются две величины: global blur score и bokeh circle count.

#### GeometricDistortions  
Реализация GeometricDistortions опирается на классическую камеральную калибровку по методике OpenCV и на оценку искривления прямых. Для первого этапа подаётся серия снимков шахматной доски с известным числом внутренних углов и длиной клетки; в результате решается задача калибровки проекционной модели пинхол-камеры с учётом радиальных коэффициентов k1, k2, p1, p2, k3. Для альтернативной оценки используется детекция длинных прямых сегментов методом HoughLinesP, после чего вычисляется среднее отклонение точек от идеальной прямой. Первая метрика отражает глобальную радиальную дисторсию объектива, вторая – геометрические искажения непосредственно по сцене.

#### InfraRed  
InfraRed оценивает проникновение ближнего ИК-излучения в видимую компоненту изображения. На вход подаётся цветное изображение без предварительной гамма-коррекции; компоненты B, G, R приводятся к плавающему типу, после чего вычисляется IR-дифференциал как R минус среднее арифметическое G и B. Отрицательные значения обрезаются, а положительные используются для расчёта средней величины IR-просачивания и доли пикселей, превышающих заданный порог. В теоретической основе лежит тот факт, что сенсорная матрица регистрирует ИК-свет преимущественно в красном канале, и избыточный сигнал отличается от видимого спектра сцены.

#### LightPower  
LightPower предназначен для оценки мощности и равномерности освещения по одному кадру. Обработка начинается с перевода BGR в оттенки серого, после чего изображение делится на равномерную сетку из заданного числа столбцов и строк. В каждой ячейке вычисляется средняя яркость, из которой формируются три параметра: среднее значение по всему кадру, отношение минимальной ячейки к максимальной (uniformity) и коэффициент вариации. Концептуально это опирается на модель яркости Y в соответствии с цветокоррекцией (0.299·R + 0.587·G + 0.114·B), позволяющей оценить равномерность подсветки поверхности.

#### Noise  
Алгоритм Noise ориентирован на измерение уровня шума в равномерно освещённой области изображения. В качестве входа рекомендуется кадр без текстур и контуров, допускающий применение высокочастотного фильтра (например, усредняющего или гауссова среза) для отделения шумовой компоненты. После применения высокочастотного шаблона или вычитания размытой копии считается стандартное отклонение оставшегося сигнала – оно отражает суммарный вклад квантового, теплового и электронического шума. В вышестоящей теории фотонов шум выражается как функция корня из среднего уровня сигнала, потому получение σ напрямую позволяет характеризовать SNR.

#### RollingShutter  
RollingShutter анализирует искажения, возникающие при последовательной построчной экспозиции сенсора. На вход подаётся кадр со статичными вертикальными элементами (архитектурные колонны, рейки), из которого сначала извлекаются границы методом Canny, а затем находятся линейные сегменты HoughLinesP. Для тех, чей наклон соответствует условию близости к вертикали с заданным угловым допуском, вычисляется абсолютное отклонение от 90 °, после чего по длинам сегментов формируется взвешенное среднее. Теоретически искажения проявляются как смещение строк захвата во времени, что приводит к наклону линий в результирующем изображении.

#### Sharpness  
В Sharpness реализована оценка чёткости через дисперсию градиентного поля или через метрику Tenengrad. Для любого кадра сначала вычисляются градиенты по осям X и Y фильтром Собеля, затем формируется матрица амплитуд градиента, после чего считается среднеквадратическая величина по всему кадру. Чем выше среднеквадратное значение градиента, тем более резким считается изображение. Теоретической опорой служит связь между величиной пространственной производной яркости и степенью фокусировки оптической системы.

#### Vinet  
Модуль Vinet предусматривает оценку виньетирования через моделирование плотности потока на матрице. Входным изображением служит сцена с однородной освещённой плоскостью либо равномерным фоном. После перевода в градации серого строится профиль яркости в зависимости от расстояния от центра кадра; затем производится аппроксимация полиномиальной или радиальной функцией, описывающей падение яркости. Величины коэффициентов модели (обычно порядка 2–4) и максимальный перепад яркости вдоль радиуса формируют итоговый «виньетинг-скор».
